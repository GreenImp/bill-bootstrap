/*!
 * Navigation
 */

.nav{
	display:block;
	color:darken(#fff, 15%);
	background:darken($background-colour, 50%);

	/**
	 * Style links
	 */
	a{
		color:#fff;
		text-decoration:none;
		-webkit-transition:all 0.15s linear;
		-moz-transition:all 0.15s linear;
		-o-transition:all 0.15s linear;
		transition:all 0.15s linear;

		&:hover{
			color:darken(#fff, 5%);
			background:darken($background-colour, 75%);
		}
	}

	/**
	 * Clear the inner floated elements
	 */
	&:after{
		content:" ";
		display:table;
		clear:both;
	}

	/**
	 * Basic UL styling
	 */
	ul{
		list-style:none;
		margin:0;
		padding:0;

		> li{
			position:relative;
			margin:0;

			/**
			 * Show sub-menu, on hover of it's parent
			 */
			&:hover{
				> ul{
					top:100%;
					left:0;
					width:auto;
					min-width:100%;
					height:auto;
				}
			}

			/**
			 * give textual elements some styling
			 */
			a,
			span,
			label,
			div,
			h1, h2, h3,
			h4, h5, h6{
				display:block;
				margin:0;
				padding:12px;
				min-width:100%;
			}

			/*
			 * li with sub menu
			 */
			&.hasSub{
				&:after{
					content:'';
					position:absolute;
					right:12px;
					top:0;
					margin-top:20px;
					border-top:5px solid #fff;
					border-left:5px solid transparent;
					border-right:5px solid transparent;
				}

				> a,
				> span,
				> label,
				> div,
				> h1, > h2, > h3,
				> h4, > h5, > h6{
					padding-right:28px;
				}
			}
		}
	}

	/**
	 * Define level specific styling
	 */
	/* Root level */
	> ul{
		float:left;

		/**
		 * Root level li elements
		 */
		> li{
			float:left;
			margin-left:1px;

			&:before{
				content:'';
				position:absolute;
				top:50%;
				right:100%;
				margin-top:-5px;
				height:10px;
				border-right:1px solid #fff;
			}

			&:first-child{
				margin-left:0px;

				&:before{
					display:none;
				}
			}

			/**
			 * Sub menus
			 */
			> ul{
				font-size:0.85em;
			}

			ul{
				position:absolute;
				top:-9999em;
				left:-9999em;
				width:0;
				height:0;
				background:darken($background-colour, 45%);

				li{
					margin-bottom:1px;
					min-width:100%;
					white-space:nowrap;

					&.divider:after{
						content:'';
						position:absolute;
						top:100%;
						left:10px;
						right:10px;
						border-bottom:1px solid #fff;
					}

					/**
					 * Set different offset for 3rd level (and greater) sub menus
					 */
					&:hover{
						> ul{
							top:0;
							left:100%;
							width:auto;
							min-width:0;
						}
					}

					/**
					 * Sub menu text elements
					 */
					a,
					span,
					label,
					div,
					h1, h2, h3,
					h4, h5, h6{
						padding:4px 12px;
					}

					/*
					 * sub li with sub menu
					 */
					&.hasSub{
						&:after{
							margin-top:8px;
							border:none;
							border-left:5px solid #fff;
							border-top:5px solid transparent;
							border-bottom:5px solid transparent;
						}
					}
				}
			}
		}

		/**
		 * Right-aligned nav elements
		 */
		&.right{
			float:right;
			text-align:right;

			/**
			 * Show sub-menu, on hover of it's parent
			 */
			> li{
				&:hover{
					> ul{
						left:auto;
						right:0;
					}
				}

				/**
				 * position third level (and greater) navigation to the right
				 */
				ul > li{
					&:hover{
						> ul{
							left:auto;
							right:100%;
						}
					}

					/*
					 * sub li with sub menu
					 */
					&.hasSub{

						&:after{
							left:12px;
							right:auto;
							border:none;
							border-left:none;
							border-right:5px solid #fff;
							border-top:5px solid transparent;
							border-bottom:5px solid transparent;
						}

						> a,
						> span,
						> label,
						> div,
						> h1, > h2, > h3,
						> h4, > h5, > h6{
							padding-right:12px;
							padding-left:28px;
						}
					}
				}
			}
		}
	}
}

/* ==========================================================================
 * Media Queries
 * ========================================================================== */

@media handheld, only screen and (max-width: 767px) {
	.nav{
		overflow:hidden;

		ul,
		ul.right{
			float:none;
			text-align:left;
			border-top:1px solid #fff;

			&:first-child,
			&:first-of-type{
				border:none;
			}

			li{
				float:none;
				width:100%;
				white-space:normal;

				&:before{
					border-left:none;
					border-right:none;
				}

				ul{
					position:static;
					top:auto;
					left:auto;
					right:auto;
					bottom:auto;
					width:100%;
					height:auto;

					li{
						/*
						 * sub li with sub menu
						 */
						&.hasSub{

							&:after{
								left:auto;
								right:12px;
								border:none;
								border-left:5px solid #fff;
								border-right:none;
								border-top:5px solid transparent;
								border-bottom:5px solid transparent;
							}

							> a,
							> span,
							> label,
							> div,
							> h1, > h2, > h3,
							> h4, > h5, > h6{
								padding-left:12px;
								padding-right:28px;
							}
						}
					}
				}
			}
		}
	}
}